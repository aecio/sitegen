plugins {
    id 'java'
    id 'application'
    id 'com.github.sherter.google-java-format' version '0.8'
}

version = '0.3.0'
sourceCompatibility = 1.8
mainClassName = "com.aeciosantos.sitegen.Main"

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'com.github.spullara.mustache.java', name: 'compiler', version: '0.9.1'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.7.4'
    compile group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-yaml', version: '2.7.4'
    compile group: 'commons-io', name: 'commons-io', version: '2.5'
    compile group: 'org.nanohttpd', name: 'nanohttpd-webserver', version: '2.3.1'
    compile group: 'com.google.guava', name: 'guava', version: '20.0'
    compile group: 'com.atlassian.commonmark', name: 'commonmark', version: '0.7.1'
    compile group: 'org.freemarker', name: 'freemarker', version: '2.3.28'
    compile group: 'com.github.rvesse', name: 'airline', version: '2.8.0'

    testCompile group: 'junit', name: 'junit', version: '4.+'
}

test {
    systemProperties 'property': 'value'
}

uploadArchives {
    repositories {
        flatDir {
            dirs 'repos'
        }
    }
}

//
// Adds version to final JAR artifact
//
jar {
    manifest {
        attributes(
                'Implementation-Title': 'Sitegen',
                'Implementation-Version': version
        )
    }
}

import com.github.sherter.googlejavaformatgradleplugin.GoogleJavaFormat
task format(type: GoogleJavaFormat) {
//    source 'src/main'
//    source 'src/test'
//    include '**/*.java'
//    exclude '**/*Template.java'
}